<mat-tree [dataSource]="nestedDataSource" [treeControl]="nestedTreeControl" class="documentation-tree">
  <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
    <li class="mat-tree-node">
         <div class="documentationNode" >{{node.data.name}}</div>
    </li>
  </mat-tree-node>

  <mat-nested-tree-node *matTreeNodeDef="let node; when: hasNestedChild">
    <li>
      <div class="mat-tree-node">
        <button mat-icon-button matTreeNodeToggle
                [attr.aria-label]="'toggle ' + node.data.name">
          <mat-icon class="mat-icon-rtl-mirror">
            {{nestedTreeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
          </mat-icon>
        </button>
        <div class="documentationNode level{{node.level}}" >{{node.data.name}}</div>
      </div>
      <ul [class.documentation-tree-invisible]="!nestedTreeControl.isExpanded(node)">
        <div class="mat-tree-node pull-right" *ngFor="let project of node.projects">
          <ul class="flex-container flex-direction-column flex-align-items-start" >
            <li>
              <div class="project level{{project.level}}" >{{project.data.name}}  <span class="branch" >({{project.branch.data.name}})</span> </div>



              <div class="mat-tree-node pull-right" *ngFor="let feature of project.branch.features">
                <ul class="flex-container flex-direction-column flex-align-items-start" >
                  <li>
                    <div class="feature level{{feature.level}}" >{{feature.data.name}}  </div>
                    <div class="feature" >{{feature.data.description}}  </div>



                    <div class="pull-right" *ngFor="let scenario of feature.scenarios">
                      <ul class="flex-container flex-direction-column flex-align-items-start" >
                        <li>
                          <div class="scenario" >{{scenario.data.name}}  </div>

                          <ul>
                            <li>abstractionLevel: {{scenario.data.abstractionLevel}}</li>
                            <li>caseType: {{scenario.data.caseType}}</li>
                            <li>workflowStep: {{scenario.data.workflowStep}}</li>

                            <div class="steps">
                              <div class="pull-right" *ngFor="let step of scenario.steps">
                                <ul class="flex-container flex-direction-column flex-align-items-start" >
                                  <li>
                                    <div class="step" ><span class="stepKeyword" >{{step.data.keyword}}</span> {{step.data.text}}  </div>

                                    <div  *ngIf="step.hasTable"  class="table pull-right" >
                                      <app-documentation-theme-book-table [table]="step.table" ></app-documentation-theme-book-table>
                                    </div>


                                  </li>
                                </ul>
                              </div>
                            </div>


                         </ul>
                        </li>
                      </ul>
                    </div>



                  </li>
                </ul>
              </div>



            </li>
          </ul>
        </div>
      </ul>

      <ul [class.documentation-tree-invisible]="!nestedTreeControl.isExpanded(node)">
        <ng-container matTreeNodeOutlet></ng-container>
      </ul>


    </li>
  </mat-nested-tree-node>
</mat-tree>
